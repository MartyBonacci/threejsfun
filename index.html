<!DOCTYPE html>
<html lang="en">
	<head>
		<title>fun with three.js</title>

		<style>
			body {margin: 0}
			canvas {width: 100%; height: 100%}
		</style>
	</head>
	<body>
		<script src="/node_modules/three/examples/js/Detector.js"></script>
		<script src="js/three.js"></script>
		<script src="js/OrbitControls.js"></script>
		<script src="/node_modules/three/examples/js/libs/dat.gui.min.js"></script>
		<script src="node_modules/three/examples/js/loaders/LoaderSupport.js"></script>
		<script src="js/OBJLoader2.js"></script>


		<script>
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000);
			var renderer = new THREE.WebGLRenderer();
			renderer.setSize(window.innerWidth, window.innerHeight);
			document.body.appendChild(renderer.domElement);

			window.addEventListener('resize', function() {
				var width = window.innerWidth;
				var height = window.innerHeight;
				renderer.setSize(width,height);
				camera.aspect = width/height;
				camera.updateProjectionMatrix();
			});

			controls = new THREE.OrbitControls(camera, renderer.domElement);

			// var loader = new THREE.OBJLoader2();
			//
			// // loader.load
			// // (
			// // 	'models/female02.obj',
			// // 	function (object){
			// // 		scene.add(object);
			// // 	}
			// // );
			//
			//
			// // function called on successful load
			// var callbackOnLoad = function ( event ) {
			// 	scene.add( event.detail.loaderRootNode );
			// };
			//
			//
			//
			// // load a resource from provided URL synchronously
			// loader.load( 'models/box-normals-out.obj', callbackOnLoad, null, null, null, false );


			var surfaceFromBackend = [0,1.75,.75, .5,1.5,.5, -.5,1.5,.5, -.75,1.25,.25, .5,1.5,.5, -.5,1.5,.5, .75,1.25,.25, -.75,1.25,.25, .5,1.5,.5, .75,1.25,.25, -.75,1.25,.25, 1,1,0, 1,1,0, -1,1,0, -.75,1.25,.25, -.5,0,.25, 1,1,0, -1,1,0, .5,0,.25, -.5,0,.25, 1,1,0, .5,0,.25, -.5,0,.25, 1,-1,0, -.5,0,.25, 1,-1,0, -1,-1,0, 1,-1,0, -1,-1,0, .75,-1.25,.25, -1,-1,0, .75,-1.25,.25, -.75,-1.25,.25, .75,-1.25,.25, -.75,-1.25,.25, .5,-1.5,.5, -.75,-1.25,.25, .5,-1.5,.5, -.5,-1.5,.5, .5,-1.5,.5, -.5,-1.5,.5,0,-1.75,.75];
			console.log(testArray);
			var geometry = new THREE.BufferGeometry();
			// create a simple square shape. We duplicate the top left and bottom right
			// vertices because each vertex needs to appear once per triangle.
			var vertices = new Float32Array(surfaceFromBackend);


			// itemSize = 3 because there are 3 values (components) per vertex
			geometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );
			var material = new THREE.MeshLambertMaterial( { color: 0xffffff, side: THREE.DoubleSide } );
			var mesh = new THREE.Mesh( geometry, material );
			scene.add(mesh);


			//create the shape
			// var geometry = new THREE.BoxGeometry(2,2,2);
			// var cubeMaterials = [
			// 	new THREE.MeshLambertMaterial({map: new THREE.TextureLoader().load('images/jim606x3000.jpg'),side: THREE.DoubleSide}), // right
			// 	new THREE.MeshPhongMaterial({map: new THREE.TextureLoader().load('images/chara.jpg'),side: THREE.DoubleSide}), // left
			// 	new THREE.MeshLambertMaterial({map: new THREE.TextureLoader().load('images/chara.png'),side: THREE.DoubleSide}), // top
			// 	new THREE.MeshLambertMaterial({color: 0xffffff,side: THREE.DoubleSide}), // bottom
			// 	new THREE.MeshPhongMaterial({map: new THREE.TextureLoader().load('images/frisk.jpg'),side: THREE.DoubleSide}), // front
			// 	new THREE.MeshBasicMaterial({map: new THREE.TextureLoader().load('images/matt645x3000.jpg'),side: THREE.DoubleSide}), // back
			// ];

			//create material color or image texture
			// var material = new THREE.MeshFaceMaterial(cubeMaterials);
			// var cube = new THREE.Mesh(geometry, material);
			// scene.add(cube);

			camera.position.z =13;

			// // Floor
			// var floorGeometry = new THREE.CubeGeometry( 10, 1, 10 );
			// var floorMaterial = new THREE.MeshLambertMaterial( { map: new THREE.TextureLoader( ).load( 'images/Ground.jpg' ), side: THREE.DoubleSide } );
			// var floorCube = new THREE.Mesh( floorGeometry, floorMaterial );
			// floorCube.position.y = -5;
			// scene.add( floorCube );
			// // Ceiling
			// var ceilingGeometry = new THREE.CubeGeometry( 10, 1, 10 );
			// var ceilingMaterial = new THREE.MeshLambertMaterial( { map: new THREE.TextureLoader( ).load( 'images/Ceiling.jpg' ), side: THREE.DoubleSide } );
			// var ceilingCube = new THREE.Mesh( ceilingGeometry, ceilingMaterial );
			// ceilingCube.position.y = 5;
			// scene.add( ceilingCube );
			// // Left Wall
			// var leftWallGeometry = new THREE.CubeGeometry( 1, 10, 10 );
			// var leftWallMaterial = new THREE.MeshLambertMaterial( { map: new THREE.TextureLoader( ).load( 'images/Wall.jpg' ), side: THREE.DoubleSide } );
			// var leftWallCube = new THREE.Mesh( leftWallGeometry, leftWallMaterial );
			// leftWallCube.position.x = -5;
			// scene.add( leftWallCube );
			// // Right Wall
			// var rightWallGeometry = new THREE.CubeGeometry( 1, 10, 10 );
			// var rightWallMaterial = new THREE.MeshLambertMaterial( { map: new THREE.TextureLoader( ).load( 'images/Wall.jpg' ), side: THREE.DoubleSide } );
			// var rightWallCube = new THREE.Mesh( rightWallGeometry, rightWallMaterial );
			// rightWallCube.position.x = 5;
			// scene.add( rightWallCube );

			var ambientLigth = new THREE.AmbientLight(0xffffff, 0.8);
			scene.add(ambientLigth);

			var light1 = new THREE.PointLight(0xff0040, 1.2, 50);
			scene.add(light1);

			var light2 = new THREE.PointLight(0x0040ff, 1.1, 50);
			scene.add(light2);

			var light3 = new THREE.PointLight(0x80ff80, 1.05, 50);
			scene.add(light3);

			var directionalLight = new THREE.DirectionalLight(0xffffff, 1);
			directionalLight.position.set(0, 1, 0);
			scene.add(directionalLight);

			var spotLight = new THREE.SpotLight(0xff45f6, 25);
			spotLight.position.set(0, 3, 0);
			scene.add(spotLight);

			// game logic
			var update = function(){
				// cube.rotation.x += .01;
				// 	cube.rotation.y += .005;
				//
					var time = Date.now() * 0.0005;
					light1.position.x = Math.sin(time * 0.7) * 30;
					light1.position.y = Math.cos(time * 0.5) * 30;
					light1.position.z = Math.cos(time * 0.3) * 30;

					light2.position.x = Math.cos(time * 0.3) * 30;
					light2.position.y = Math.sin(time * 0.5) * 30;
					light2.position.z = Math.sin(time * 0.7) * 30;

					light3.position.x = Math.sin(time * 0.7) * 30;
					light3.position.y = Math.cos(time * 0.3) * 30;
					light3.position.z = Math.sin(time * 0.5) * 30;
			};

			// draw scene
			var render = function() {
				renderer.render(scene, camera);
			};

			// run game loop (update, render, repeat)
			var GameLoop = function(){
				requestAnimationFrame( GameLoop);
				update();
				render();
			};

			GameLoop();

		</script>
	</body>
</html>